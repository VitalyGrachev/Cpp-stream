# Cpp-stream
Library to support functional-style operations on streams of elements.
All non-termainal operations are lazy.

## Usage

### Construction

```cpp
// Creates an infinite stream of values returned by given function
Stream s([](){ return 1; });  // [ 1, 1, 1, 1, ... ]
```
```cpp
std::vector vec{ 1, 2, 3, 4, 5 };
// Creates stream of container elements
Stream s(vec);  // [ 1, 2, 3, 4, 5 ]
```
```cpp
// Creates stream of initializer list elements
Stream s({ 1, 2, 3, 4, 5 });  // [ 1, 2, 3, 4, 5 ]
```
```cpp
// Creates stream of given elements
Stream s(1, 2, 3, 4, 5);  // [ 1, 2, 3, 4, 5 ]
```
### Non-terminal operations
#### Filter
Creates new stream containing only elements of given stream for which given predicate returns true
```cpp
Stream s(1, 2, 3, 4, 5);
Stream filtered = s | filter([](int i){ return i % 2; }); // [ 1, 3, 5 ]
```
#### Map
Creates new stream containing elements of given stream transformed by given function
```cpp
Stream s(1, 2, 3);
Stream mapped = s | map([](int i){ return std::make_pair("test", i); }); // [ pair("test", 1), pair("test", 2), pair("test", 3) ]
```
#### Skip
Creates new stream containing elements of given stream except for given amount of leading elements
```cpp
Stream s(1, 2, 3, 4, 5);
Stream skipped = s | skip(2); // [ 3, 4, 5 ]
```
#### Get
Creates new stream containing given amount of leading elements of given stream
```cpp
Stream s(1, 2, 3, 4, 5);
Stream getted = s | get(3); // [ 1, 2, 3 ]
```
#### Group
Creates new stream containing grouped into std::vectors of given size elements of given stream
```cpp
Stream s(1, 2, 3, 4, 5);
Stream grouped = s | group(3); // [ std::vector({1, 2, 3}), std::vector({4, 5}) ]
```

## Terminal operations

#### Reduce
Executes given reducer function on each element of given stream. Returns resulting value
Produces compile error when applied to an infinite stream
```cpp
Stream s(1, 2, 3, 4, 5);
int = s | reduce([](int accum, int value){ return accum + 2 * value; }); // 30

// Initial value can be generated by identity function applied to first element of stream
int = s | reduce([](int first){ return 10 * first; }, [](int accum, int value){ return accum + 2 * value; }); // 38
```
#### Sum
Sums up elements of given stream
Produces compile error when applied to an infinite stream
```cpp
Stream s(1, 2, 3, 4, 5);
int = s | sum(); // 15
```
#### Nth element
Returns nth element of given stream
```cpp
Stream s(1, 2, 3, 4, 5);
int = s | nth(3); // 4
```
#### Print to
Prints elements of given stream to given std::ostream
Produces compile error when applied to an infinite stream
```cpp
Stream s(1, 2, 3, 4, 5);
s | print_to(std::cout); // Prints "1 2 3 4 5"
```
#### To vector
Returns std::vector containing elements of given stream
Produces compile error when applied to an infinite stream
```cpp
Stream s(1, 2, 3, 4, 5);
std::vector vec = s | to_vector(); // std::vector({1, 2, 3, 4, 5})
```
